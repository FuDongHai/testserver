<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="zh"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>EMService.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">im-sdk-core</a> &gt; <a href="index.source.html" class="el_package">com.easemob.im.server</a> &gt; <span class="el_source">EMService.java</span></div><h1>EMService.java</h1><pre class="source lang-java linenums">package com.easemob.im.server;

import com.easemob.im.server.api.Context;
import com.easemob.im.server.api.DefaultContext;
import com.easemob.im.server.api.block.BlockApi;
import com.easemob.im.server.api.attachment.AttachmentApi;
import com.easemob.im.server.api.message.MessageApi;
import com.easemob.im.server.api.metadata.MetadataApi;
import com.easemob.im.server.api.notification.NotificationApi;
import com.easemob.im.server.api.room.RoomApi;
import com.easemob.im.server.api.group.GroupApi;
import com.easemob.im.server.api.contact.ContactApi;
import com.easemob.im.server.api.sms.SmsApi;
import com.easemob.im.server.api.user.UserApi;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

/**
 * Server SDK API服务类
 */
public class EMService {

<span class="nc" id="L23">    private static final Logger log = LoggerFactory.getLogger(EMService.class);</span>

    private final Context context;

    private final BlockApi blockV1;

    private final ContactApi contactApi;

    private final AttachmentApi attachmentApi;

    private final GroupApi groupApi;

    private final MessageApi messageApi;

    private final RoomApi roomApi;

    private final UserApi userApi;

    private final SmsApi smsApi;

    private final MetadataApi metadataApi;

    private final NotificationApi notificationApi;

<span class="nc" id="L47">    public EMService(EMProperties properties) {</span>
<span class="nc" id="L48">        log.debug(&quot;EMService properties: {}&quot;, properties);</span>
<span class="nc" id="L49">        this.context = new DefaultContext(properties);</span>

<span class="nc" id="L51">        this.blockV1 = new BlockApi(this.context);</span>
<span class="nc" id="L52">        this.contactApi = new ContactApi(this.context);</span>
<span class="nc" id="L53">        this.attachmentApi = new AttachmentApi(this.context);</span>
<span class="nc" id="L54">        this.messageApi = new MessageApi(this.context);</span>
<span class="nc" id="L55">        this.groupApi = new GroupApi(this.context);</span>
<span class="nc" id="L56">        this.roomApi = new RoomApi(this.context);</span>
<span class="nc" id="L57">        this.userApi = new UserApi(this.context);</span>
<span class="nc" id="L58">        this.smsApi = new SmsApi(this.context);</span>
<span class="nc" id="L59">        this.metadataApi = new MetadataApi(this.context);</span>
<span class="nc" id="L60">        this.notificationApi = new NotificationApi(this.context);</span>
<span class="nc" id="L61">    }</span>

    /**
     * 封禁API.&lt;br&gt;
     * 支持：&lt;br&gt;
     *  - 用户禁言&lt;br&gt;
     *  - 群禁言（可以定时解除）&lt;br&gt;
     *  - 聊天室禁言（可以定时解除）&lt;br&gt;
     *  - 禁止加入群&lt;br&gt;
     *  - 禁止加入聊天室&lt;br&gt;
     *  - 禁止登录&lt;br&gt;
     *
     * @return {@code BlockApi}
     */
    public BlockApi block() {
<span class="nc" id="L76">        return this.blockV1;</span>
    }

    /**
     * 通讯录API.&lt;br&gt;
     * 支持：&lt;br&gt;
     *  - 添加联系人&lt;br&gt;
     *  - 移除联系人&lt;br&gt;
     *  - 获取联系人列表&lt;br&gt;
     *
     * 目前联系人只作为通讯录之用.
     * @return {@code ContactApi}
     */
    public ContactApi contact() {
<span class="nc" id="L90">        return this.contactApi;</span>
    }

    /**
     * 附件API.&lt;br&gt;
     * 支持：&lt;br&gt;
     *  - 附件上传&lt;br&gt;
     *  - 附件下载&lt;br&gt;
     *
     * 目前，只支持本地文件的上传和下载.
     * @return {@code AttachmentApi}
     */
    public AttachmentApi attachment() {
<span class="nc" id="L103">        return this.attachmentApi;</span>
    }

    /**
     * 群API.&lt;br&gt;
     * &lt;p&gt;支持群管理：&lt;br&gt;
     *  - 创建群&lt;br&gt;
     *  - 删除群&lt;br&gt;
     *  - 获取群列表&lt;br&gt;
     *  - 获取群详情&lt;br&gt;
     *  - 获取用户加入的群&lt;br&gt;
     *  - 修改群详情&lt;br&gt;
     *  - 修改群主&lt;br&gt;
     *  &lt;br&gt;
     * &lt;p&gt;支持群成员管理：&lt;br&gt;
     *  - 获取群成员列表&lt;br&gt;
     *  - 添加群成员&lt;br&gt;
     *  - 删除群成员&lt;br&gt;
     *  &lt;br&gt;
     * &lt;p&gt;支持群管理员管理：&lt;br&gt;
     *  - 获取群管理员列表&lt;br&gt;
     *  - 添加群管理员&lt;br&gt;
     *  - 删除群管理员&lt;br&gt;
     *
     * 群与聊天室都是多人聊天，与聊天室主要差别在于群支持离线消息，即群成员上线时可以收到离线时错过的消息。
     * 如果配置了推送，则离线消息也会产生推送。
     * 群分为公开群和私有群，区别在于：在设备SDK中（指iOS、Android、Web、小程序等），私有群不会出现在群列表API的返回结果。
     *
     * @see com.easemob.im.server.api.block.BlockApi
     * @return {@code GroupApi}
     */
    public GroupApi group() {
<span class="nc" id="L135">        return this.groupApi;</span>
    }

    /**
     * 消息API.&lt;br&gt;
     * 支持：&lt;br&gt;
     *  - 发送消息&lt;br&gt;
     *  - 查询离线消息数&lt;br&gt;
     *  - 获取/下载聊天历史&lt;br&gt;
     *
     * @return {@code MessageApi}
     */
    public MessageApi message() {
<span class="nc" id="L148">        return this.messageApi;</span>
    }

    /**
     * 用户API.&lt;br&gt;
     * 支持：&lt;br&gt;
     *  - 创建用户&lt;br&gt;
     *  - 删除用户&lt;br&gt;
     *  - 获取用户&lt;br&gt;
     *  - 修改用户密码&lt;br&gt;
     *  - 强制用户下线&lt;br&gt;
     *  - 获取用户在线状态&lt;br&gt;
     *  - 获取用户token&lt;br&gt;
     *
     * @return {@code UserApi}
     */
    public UserApi user() {
<span class="nc" id="L165">        return this.userApi;</span>
    }

    /**
     * 聊天室API.&lt;br&gt;
     * 支持聊天室管理：&lt;br&gt;
     *  - 创建聊天室&lt;br&gt;
     *  - 获取聊天室详情&lt;br&gt;
     *  - 修改聊天室&lt;br&gt;
     *  - 获取聊天室列表&lt;br&gt;
     *  - 获取用户加入的聊天室列表&lt;br&gt;
     * &lt;br&gt;
     * &lt;p&gt;支持聊天室成员管理：&lt;br&gt;
     *  - 获取聊天室成员列表&lt;br&gt;
     *  - 添加聊天室成员&lt;br&gt;
     *  - 移除聊天室成员&lt;br&gt;
     * &lt;br&gt;
     * &lt;p&gt;支持聊天室管理员管理：&lt;br&gt;
     *  - 获取聊天室管理员&lt;br&gt;
     *  - 添加聊天室管理员&lt;br&gt;
     *
     * @see com.easemob.im.server.api.block.BlockApi
     * @return {@code RoomApi}
     */
    public RoomApi room() {
<span class="nc" id="L190">        return this.roomApi;</span>
    }

    /**
     * 发送短信API.&lt;br&gt;
     * 支持：&lt;br&gt;
     *  - 发送短信&lt;br&gt;
     *
     * @return {@code SmsApi}
     */
    public SmsApi sms() {
<span class="nc" id="L201">        return this.smsApi;</span>
    }

    /**
     * 用户属性API.&lt;br&gt;
     * 支持：&lt;br&gt;
     *  - 设置用户属性&lt;br&gt;
     *  - 获取用户属性&lt;br&gt;
     *  - 获取app用户属性容量&lt;br&gt;
     *  - 删除用户属性&lt;br&gt;
     *
     * @return {@code MetadataApi}
     */
    public MetadataApi metadata() {
<span class="nc" id="L215">        return this.metadataApi;</span>
    }

    /**
     * 推送通知免打扰API.&lt;br&gt;
     * 支持：&lt;br&gt;
     *  - 获取推送通知免打扰信息&lt;br&gt;
     *
     * @return {@code NotificationApi}
     */
    public NotificationApi notification() {
<span class="nc" id="L226">        return this.notificationApi;</span>
    }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>